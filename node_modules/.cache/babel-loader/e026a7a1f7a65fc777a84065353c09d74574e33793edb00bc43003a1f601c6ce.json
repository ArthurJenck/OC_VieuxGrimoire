{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\nexport function useUser() {\n  _s();\n  const [connectedUser, setConnectedUser] = useState(null);\n  const [auth, setAuth] = useState(false);\n  const [userLoading, setUserLoading] = useState(true);\n  useEffect(() => {\n    async function getUserDetails() {\n      const {\n        authenticated,\n        user\n      } = await getAuthenticatedUser();\n      setConnectedUser(user);\n      setAuth(authenticated);\n      setUserLoading(false);\n    }\n    getUserDetails();\n  }, []);\n  return {\n    connectedUser,\n    auth,\n    userLoading\n  };\n}\n_s(useUser, \"USUuoq3iL4KXhbv5aB1AeqEyIFU=\");\nexport function useBestRatedBooks() {\n  _s2();\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\n  useEffect(() => {\n    async function getRatedBooks() {\n      const books = await getBestRatedBooks();\n      setBestRatedBooks(books);\n    }\n    getRatedBooks();\n  }, []);\n  return {\n    bestRatedBooks\n  };\n}\n_s2(useBestRatedBooks, \"enaNHG66GCQ9n35hWjbuWwoCHGw=\");\nexport function useFilePreview(file) {\n  _s3();\n  var _file$, _fileInput$;\n  const fileInput = (_file$ = file[0]) !== null && _file$ !== void 0 ? _file$ : [];\n  const [imgSrc, setImgSrc] = useState(null);\n  useEffect(() => {\n    var _file$2;\n    if (file && ((_file$2 = file[0]) === null || _file$2 === void 0 ? void 0 : _file$2.length) > 0) {\n      const newUrl = URL.createObjectURL(file[0][0]);\n      if (newUrl !== imgSrc) {\n        setImgSrc(newUrl);\n      }\n    }\n  }, [(_fileInput$ = fileInput[0]) === null || _fileInput$ === void 0 ? void 0 : _fileInput$.name]);\n  return [imgSrc, setImgSrc];\n}\n_s3(useFilePreview, \"Rxc+5LYzXyTnmDg8veUjSLSqj8Y=\");","map":{"version":3,"names":["useState","useEffect","getAuthenticatedUser","getBestRatedBooks","useUser","_s","connectedUser","setConnectedUser","auth","setAuth","userLoading","setUserLoading","getUserDetails","authenticated","user","useBestRatedBooks","_s2","bestRatedBooks","setBestRatedBooks","getRatedBooks","books","useFilePreview","file","_s3","_file$","_fileInput$","fileInput","imgSrc","setImgSrc","_file$2","length","newUrl","URL","createObjectURL","name"],"sources":["C:/Users/ajenc/OneDrive/Dev/OpenClassrooms/Projet 6 - Back-end/VieuxGrimoire/src/lib/customHooks.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { getAuthenticatedUser, getBestRatedBooks } from './common';\r\n\r\nexport function useUser() {\r\n  const [connectedUser, setConnectedUser] = useState(null);\r\n  const [auth, setAuth] = useState(false);\r\n  const [userLoading, setUserLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function getUserDetails() {\r\n      const { authenticated, user } = await getAuthenticatedUser();\r\n      setConnectedUser(user);\r\n      setAuth(authenticated);\r\n      setUserLoading(false);\r\n    }\r\n    getUserDetails();\r\n  }, []);\r\n\r\n  return { connectedUser, auth, userLoading };\r\n}\r\n\r\nexport function useBestRatedBooks() {\r\n  const [bestRatedBooks, setBestRatedBooks] = useState({});\r\n\r\n  useEffect(() => {\r\n    async function getRatedBooks() {\r\n      const books = await getBestRatedBooks();\r\n      setBestRatedBooks(books);\r\n    }\r\n    getRatedBooks();\r\n  }, []);\r\n\r\n  return { bestRatedBooks };\r\n}\r\n\r\nexport function useFilePreview(file) {\r\n  const fileInput = file[0] ?? [];\r\n  const [imgSrc, setImgSrc] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (file && file[0]?.length > 0) {\r\n      const newUrl = URL.createObjectURL(file[0][0]);\r\n\r\n      if (newUrl !== imgSrc) {\r\n        setImgSrc(newUrl);\r\n      }\r\n    }\r\n  }, [fileInput[0]?.name]);\r\n\r\n  return [imgSrc, setImgSrc];\r\n}\r\n"],"mappings":";;;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,oBAAoB,EAAEC,iBAAiB,QAAQ,UAAU;AAElE,OAAO,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACxB,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,eAAeW,cAAcA,CAAA,EAAG;MAC9B,MAAM;QAAEC,aAAa;QAAEC;MAAK,CAAC,GAAG,MAAMZ,oBAAoB,CAAC,CAAC;MAC5DK,gBAAgB,CAACO,IAAI,CAAC;MACtBL,OAAO,CAACI,aAAa,CAAC;MACtBF,cAAc,CAAC,KAAK,CAAC;IACvB;IACAC,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEN,aAAa;IAAEE,IAAI;IAAEE;EAAY,CAAC;AAC7C;AAACL,EAAA,CAhBeD,OAAO;AAkBvB,OAAO,SAASW,iBAAiBA,CAAA,EAAG;EAAAC,GAAA;EAClC,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGlB,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExDC,SAAS,CAAC,MAAM;IACd,eAAekB,aAAaA,CAAA,EAAG;MAC7B,MAAMC,KAAK,GAAG,MAAMjB,iBAAiB,CAAC,CAAC;MACvCe,iBAAiB,CAACE,KAAK,CAAC;IAC1B;IACAD,aAAa,CAAC,CAAC;EACjB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IAAEF;EAAe,CAAC;AAC3B;AAACD,GAAA,CAZeD,iBAAiB;AAcjC,OAAO,SAASM,cAAcA,CAACC,IAAI,EAAE;EAAAC,GAAA;EAAA,IAAAC,MAAA,EAAAC,WAAA;EACnC,MAAMC,SAAS,IAAAF,MAAA,GAAGF,IAAI,CAAC,CAAC,CAAC,cAAAE,MAAA,cAAAA,MAAA,GAAI,EAAE;EAC/B,MAAM,CAACG,MAAM,EAAEC,SAAS,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAE1CC,SAAS,CAAC,MAAM;IAAA,IAAA4B,OAAA;IACd,IAAIP,IAAI,IAAI,EAAAO,OAAA,GAAAP,IAAI,CAAC,CAAC,CAAC,cAAAO,OAAA,uBAAPA,OAAA,CAASC,MAAM,IAAG,CAAC,EAAE;MAC/B,MAAMC,MAAM,GAAGC,GAAG,CAACC,eAAe,CAACX,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAE9C,IAAIS,MAAM,KAAKJ,MAAM,EAAE;QACrBC,SAAS,CAACG,MAAM,CAAC;MACnB;IACF;EACF,CAAC,EAAE,EAAAN,WAAA,GAACC,SAAS,CAAC,CAAC,CAAC,cAAAD,WAAA,uBAAZA,WAAA,CAAcS,IAAI,CAAC,CAAC;EAExB,OAAO,CAACP,MAAM,EAAEC,SAAS,CAAC;AAC5B;AAACL,GAAA,CAfeF,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}